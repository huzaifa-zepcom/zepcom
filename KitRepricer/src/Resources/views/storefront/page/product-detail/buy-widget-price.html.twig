{% sw_extends '@Storefront/storefront/page/product-detail/buy-widget-price.html.twig' %}

{% block page_product_detail_price_inner %}

    {% if app.request.get('repricer') %}
        <span class="kit--repricer float-right" style="text-align: end">
            Gross: {{ page.repricer|currency }}<br/>
            Net: {{ page.repricerNet|currency }}<br/>
            Tax: {{ page.repricerTax }}%
        </span>
    {% endif %}

    {{ parent() }}
{% endblock %}


{% block page_product_detail_price_content %}
    {% set listPrice = page.product.priceRange ? null : price.listPrice %}
    <p class="product-detail-price{% if listPrice.percentage > 0 %} with-list-price{% endif %}">
        {% if page.pvgPrice is defined %}
            {% if context.currentCustomerGroup.displayGross %}
                {{ page.pvgPrice|currency }}
            {% else %}
                {{ page.pvgPriceNet|currency }}
            {% endif %}
        {% else %}
            {{ price.unitPrice|currency }}
        {% endif %}
    </p>

    {% if listPrice.percentage > 0 %}
        {% block page_product_detail_was_price %}

            {% block page_product_detail_was_price_badge %}
                <span class="list-price-badge">&#37;</span>
            {% endblock %}

            {% block page_product_detail_was_price_wrapper %}
                <span class="product-detail-list-price-wrapper">
                            {{ "listing.beforeListPrice"|trans|trim }}
                            <span {% if not ("listing.beforeListPrice"|trans|length > 0 or "listing.afterListPrice"|trans|length > 0) %}class="list-price-price"{% endif %}>
                                {{ listPrice.price|currency }}{{ "general.star"|trans|sw_sanitize }}
                            </span>
                            {{ "listing.afterListPrice"|trans|trim }}
                            <span class="list-price-percentage">{{ "detail.listPricePercentage"|trans({'%price%': listPrice.percentage })|sw_sanitize }}</span>
                        </span>
            {% endblock %}
        {% endblock %}
    {% endif %}
{% endblock %}
